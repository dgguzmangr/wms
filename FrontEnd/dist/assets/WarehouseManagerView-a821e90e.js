import{_ as m,m as g,r as p,a as f,c as _,j as b,p as n}from"./index-54a80644.js";import{C as w}from"./CrudTable-46cdc2ff.js";import{a as l}from"./axios-a342f982.js";const y={warehouses:"BODEGAS"},D={warehouse_id:"ID",name:"Nombre",country:"País",department:"Departamento",city:"Ciudad",neighborthood:"Barrio",address:"Dirección",postal_code:"Código postal",location:"Ubicación",building:"Edificios"},x={name:{label:"Nombre",required:!0,readonly:!1,maxLength:100},country:{label:"País",required:!0,readonly:!1,maxLength:100},department:{label:"Departamento",required:!0,readonly:!1,maxLength:100},neighborthood:{label:"Barrio",required:!0,readonly:!1,maxLength:100},address:{label:"Dirección",required:!0,readonly:!1,maxLength:200},postal_code:{label:"Código postal",required:!0,readonly:!1,maxLength:100}};const k={__name:"WarehouseManagerView",setup(C){const a=g(),t=p([]),i=f(),c=async()=>{const e=localStorage.getItem("token");if(!e){console.error("No token found, redirecting to login."),a.push("/login");return}try{const o=await l.get("http://localhost:8000/show-warehouses/",{headers:{Authorization:`Token ${e}`}});t.value=o.data}catch(o){o.response&&o.response.status===401?(console.error("Unauthorized, redirecting to login."),a.push("/login")):console.error("Error fetching warehouse data:",o)}},u=async e=>{if(!e){console.error("No warehouse object provided.");return}const o=localStorage.getItem("token");if(!o){console.error("No token found, redirecting to login."),a.push("/login");return}try{(await l.delete(`http://localhost:8000/delete-warehouse/${e.warehouse_id}/`,{headers:{Authorization:`Token ${o}`}})).status===204?(t.value=t.value.filter(h=>h.warehouse_id!==e.warehouse_id),s("success","Éxito","Almacén eliminado correctamente")):s("error","Error","Error al eliminar el almacén")}catch(r){r.response&&r.response.status===401?(console.error("Unauthorized, redirecting to login."),a.push("/login")):r.response&&r.response.status===404?s("error","Error","Almacén no encontrado"):(console.error("Error deleting warehouse:",r),s("error","Error","Error al eliminar el almacén"))}},s=(e,o,r)=>{i.add({severity:e,summary:o,detail:r,life:3e3})},d=e=>{console.log("Confirm delete:",e)};return c(),(e,o)=>(_(),b(w,{tableTitle:n(y).warehouses,tableColumns:n(D),createDialogFields:n(x),tableData:t.value,deleteItem:u,confirmDeleteDialog:d},null,8,["tableTitle","tableColumns","createDialogFields","tableData"]))}},q=m(k,[["__scopeId","data-v-88a26ad6"]]);export{q as default};

import{_ as B,u as L,a as M,r as s,F as j,o as O,b as c,c as b,d as g,e as r,t as R,f as o,w as n,h as A,i as U,j as $,p as z,k as K,q as G,s as H}from"./index-54a80644.js";const I=i=>(G("data-v-89062dab"),i=i(),H(),i),J={class:"text-center p-2"},Q={class:"card"},W={class:"flex flex-wrap gap-2 align-items-center justify-content-between pb-3"},X={class:"confirmation-content"},Y=I(()=>r("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Z={key:0},ee=I(()=>r("div",{class:"confirmation-content"},[r("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),r("span",null,"¿Está seguro que desea eliminar los items seleccionados?")],-1)),te={__name:"CrudTable",props:{tableTitle:{type:String,required:!0},tableColumns:{type:Object,required:!0},createDialogFields:{type:Object,required:!0},tableData:{type:Array,required:!0},deleteItem:{type:Function,required:!0},confirmDeleteDialog:{type:Function,required:!0}},setup(i){const u=i;L();const T=M(),y=s(),m=s({});s(!1);const d=s(!1),p=s(!1),v=s([]),_=s({global:{value:null,matchMode:j.CONTAINS}});s(!1);let k=s([]);O(()=>{k.value=Object.keys(u.tableColumns).map(l=>({field:l,header:u.tableColumns[l]}))});const w=()=>{},D=l=>{m.value=l,d.value=!0},E=async()=>{try{await u.deleteItem(m.value),m.value={},d.value=!1,f("success","Éxito","Elemento eliminado correctamente")}catch(l){console.error("Error eliminando el elemento:",l),f("error","Error","Error al eliminar el elemento")}},f=(l,e,a)=>{T.add({severity:l,summary:e,detail:a,life:3e3})},S=async()=>{try{const l=await Promise.all(v.value.map(e=>u.deleteItem(e)));v.value=[],p.value=!1,f("success","Éxito","Elementos seleccionados eliminados correctamente")}catch(l){console.error("Error eliminando elementos seleccionados:",l),f("error","Error","Error al eliminar elementos seleccionados")}},P=()=>{y.value.exportCSV()},N=l=>{};return(l,e)=>{const a=c("Button"),q=c("Toolbar"),V=c("InputText"),x=c("Column"),F=c("DataTable"),h=c("Dialog");return b(),g("div",null,[r("h2",J,"ADMINISTRACIÓN DE "+R(i.tableTitle),1),r("div",Q,[o(q,{class:"mb-3"},{start:n(()=>[o(a,{label:"Crear",icon:"pi pi-plus",severity:"success",class:"mr-2",onClick:w})]),end:n(()=>[o(a,{label:"Exportar CSV",icon:"pi pi-upload",severity:"help",onClick:e[0]||(e[0]=t=>P(t))})]),_:1}),o(F,{ref_key:"dt",ref:y,value:i.tableData,selection:v.value,"onUpdate:selection":e[2]||(e[2]=t=>v.value=t),dataKey:"id",paginator:!0,rows:10,filters:_.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,50,75,100],currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} items"},{header:n(()=>[r("div",W,[o(V,{modelValue:_.value.global.value,"onUpdate:modelValue":e[1]||(e[1]=t=>_.value.global.value=t),placeholder:"Buscar..."},null,8,["modelValue"])])]),default:n(()=>[(b(!0),g(A,null,U(z(k),(t,C)=>(b(),$(x,{field:t.field,header:t.header,key:t.field+"_"+C},null,8,["field","header"]))),128)),o(x,{exportable:!1,style:{"min-width":"9rem"}},{body:n(t=>[o(a,{icon:"pi pi-pencil",outlined:"",rounded:"",style:{"background-color":"#22C55E",color:"#f7f7f7"},shape:"circle",onClick:C=>N(t.data),class:"mr-1"},null,8,["onClick"]),o(a,{icon:"pi pi-trash",outlined:"",rounded:"",style:{"background-color":"#EF4444",color:"#f7f7f7"},shape:"circle",onClick:C=>D(t.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),o(h,{visible:d.value,"onUpdate:visible":e[4]||(e[4]=t=>d.value=t),style:{width:"450px"},header:"Confirmación",modal:!0},{footer:n(()=>[o(a,{label:"No",icon:"pi pi-times",text:"",onClick:e[3]||(e[3]=t=>d.value=!1)}),o(a,{label:"Si",icon:"pi pi-check",text:"",onClick:E})]),default:n(()=>[r("div",X,[Y,m.value?(b(),g("span",Z,"¿Está seguro que desea eliminar este item?")):K("",!0)])]),_:1},8,["visible"]),o(h,{visible:p.value,"onUpdate:visible":e[6]||(e[6]=t=>p.value=t),style:{width:"450px"},header:"Confirmar eliminación",modal:!0},{footer:n(()=>[o(a,{label:"No",icon:"pi pi-times",text:"",onClick:e[5]||(e[5]=t=>p.value=!1)}),o(a,{label:"Sí",icon:"pi pi-check",text:"",onClick:S})]),default:n(()=>[ee]),_:1},8,["visible"])])])}}},le=B(te,[["__scopeId","data-v-89062dab"]]);export{le as C};

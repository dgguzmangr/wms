import{u as oe,a as se,r as v,o as te,b as f,c as i,d as u,e as t,f as s,w as d,F as ie,g as ue,h as ne,i as re,j as de,t as b,n as p,k as m,l as B}from"./index-54a80644.js";const ve=t("h2",{class:"text-center"},"ADMINISTRACIÓN DE USUARIOS",-1),me={class:"card"},ce={class:"flex flex-wrap gap-2 align-items-center justify-content-between pb-3"},pe={style:{"text-align":"left"},class:"overflow-auto"},fe={class:"field"},ye=t("label",{for:"type",class:"mb-3"},"Tipo",-1),_e={key:0},be={key:1},he={key:2},ke={class:"field"},Ce=t("label",{for:"company_name"},"Razón social",-1),Ve={key:0,class:"p-error"},ge={class:"field"},Pe=t("label",{for:"name"},"Nombres",-1),Ue={key:0,class:"p-error"},qe={class:"field"},Te=t("label",{for:"last_name"},"Apellidos",-1),De={key:0,class:"p-error"},we={class:"field"},Me=t("label",{for:"document"},"Documento",-1),Ne={key:0,class:"p-error"},Se={class:"field"},Ee=t("label",{for:"nit"},"NIT",-1),Ie={key:0,class:"p-error"},xe={class:"field"},Le=t("label",{for:"email"},"Correo electrónico",-1),Ae={key:0,class:"p-error"},Re={class:"field"},je=t("label",{for:"status",class:"mb-3"},"Estado",-1),Be={key:0},ze={key:1},Fe={key:2},$e={class:"flex d-flex justify-content-between"},Oe={class:"field"},Je=t("label",{for:"type",class:"mb-3"},"Tipo",-1),Ge={key:0},Ye={key:1},Ke={key:2},He={key:0,class:"p-error"},Qe={class:"field"},We=t("label",{for:"company_name"},"Razón social",-1),Xe={key:0,class:"p-error"},Ze={class:"field"},el=t("label",{for:"name"},"Nombres",-1),ll={key:0,class:"p-error"},al={class:"field"},ol=t("label",{for:"last_name"},"Apellidos",-1),sl={key:0,class:"p-error"},tl={class:"field"},il=t("label",{for:"document"},"Documento",-1),ul={key:0,class:"p-error"},nl={class:"field"},rl=t("label",{for:"nit"},"NIT",-1),dl={key:0,class:"p-error"},vl={class:"field"},ml=t("label",{for:"email"},"Correo electrónico",-1),cl={key:0,class:"p-error"},pl={class:"field"},fl=t("label",{for:"status",class:"mb-3"},"Estado",-1),yl={key:0},_l={key:1},bl={key:2},hl={class:"flex d-flex justify-content-between"},kl={class:"confirmation-content"},Cl=t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Vl={key:0},gl={class:"confirmation-content"},Pl=t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Ul={key:0},ql={class:"flex flex-column align-items-center p-5 surface-overlay border-round"},Tl=t("div",{class:"border-circle bg-primary inline-flex justify-content-center align-items-center h-6rem w-6rem -mt-8"},[t("i",{class:"pi pi-exclamation-triangle text-5xl",severity:"danger"})],-1),Dl={class:"font-bold text-2xl block mb-2 mt-4"},wl={class:"mb-0"},Ml={class:"flex align-items-center gap-2 mt-4"},Nl={class:"card flex justify-content-center"},Il={__name:"Users_manager",setup(Sl){const z=oe(),h=se(),E=v(),y=v([]),e=v(),V=v(!1),g=v(!1),D=v(!1),U=v(!1),I=v(!1),k=v(),w=v({global:{value:null,matchMode:ie.CONTAINS}}),n=v(!1),x=v([{label:"Natural",value:"Natural"},{label:"Jurídica",value:"Juridica"}]),L=v([{label:"Activo",value:"Activo"},{label:"Inactivo",value:"Inactivo"}]);te(()=>{});const M=v([{field:"type",header:"Tipo"},{field:"company_name",header:"Razón social"},{field:"name",header:"Nombres"},{field:"last_name",header:"Apellidos"},{field:"document",header:"Documento"},{field:"NIT",header:"NIT"},{field:"email",header:"Correo electrónico"},{field:"status",header:"Estado"},{field:"backup_email",header:"Correo electrónico de respaldo"},{field:"phone",header:"Teléfono"},{field:"ubication",header:"Ubicación"}]),N=v(M.value),F=a=>{N.value=M.value.filter(l=>a.includes(l))},$=()=>{e.value={},n.value=!1,V.value=!0},A=()=>{V.value=!1,n.value=!1},O=()=>{n.value=!0,e.value.company_name&&e.value.company_name.trim()&&e.value.type&&e.value.status&&(e.value.id?(e.value.type=e.value.type.value?e.value.type.value:e.value.type,e.value.status=e.value.status.value?e.value.status.value:e.value.status,type.value[K(e.value.id)]=e.value,h.add({severity:"success",summary:"Successful",detail:"Usuario actualizado",life:3e3})):(y.value.push(e.value),h.add({severity:"success",summary:"Successful",detail:"Usuario creado",life:3e3})),V.value=!1,e.value={})},C=a=>{switch(a){case"Natural":return"success";case"Jurídica":return"success";default:return null}},R=a=>{switch(a){case"Activo":return"success";case"Inactivo":return"danger";default:return null}},J=a=>{e.value=a,g.value=!0},G=()=>{z.require({group:"headless",header:"¿Está seguro que desea eliminar este usuario?",message:"Eliminar.",accept:()=>{h.add({severity:"info",summary:"Confirmed",detail:"Usuario eliminado",life:3e3})},reject:()=>{h.add({severity:"error",summary:"Rejected",detail:"Eliminación cancelada",life:3e3})}})},j=a=>{e.value={...a},backUpEmail.value=!0},Y=()=>{y.value=y.value.filter(a=>a.id!==e.value.id),g.value=!1,e.value={},h.add({severity:"success",summary:"Successful",detail:"Usuario eliminado",life:3e3})},K=a=>{let l=-1;for(let r=0;r<y.value.length;r++)if(y.value[r].id===a){l=r;break}return l},H=()=>{E.value.exportCSV()},Q=()=>{D.value?y.value=[]:y.value=y.value.filter(a=>!k.value.includes(a)),U.value=!1,k.value=null,D.value=!1,h.add({severity:"success",summary:"Successful",detail:"Usuarios eliminados",life:3e3})};return(a,l)=>{const r=f("Button"),W=f("Toolbar"),c=f("InputText"),X=f("MultiSelect"),S=f("Column"),Z=f("DataTable"),_=f("Tag"),q=f("Dropdown"),T=f("Dialog"),ee=f("ConfirmDeleteDialog"),le=f("Toast");return i(),u("div",null,[ve,t("div",me,[s(W,{class:"mb-4"},{start:d(()=>[s(r,{label:"Crear",icon:"pi pi-plus",severity:"success",class:"mr-2",onClick:$}),s(r,{label:"Eliminar",icon:"pi pi-trash",severity:"danger",onClick:J,disabled:!k.value||!k.value.length},null,8,["disabled"])]),end:d(()=>[s(r,{label:"Exportar CSV",icon:"pi pi-upload",severity:"help",onClick:l[0]||(l[0]=o=>H(o))})]),_:1}),s(Z,{ref_key:"dt",ref:E,value:y.value,selection:k.value,"onUpdate:selection":l[2]||(l[2]=o=>k.value=o),dataKey:"id",paginator:!0,rows:10,filters:w.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,50,75,100],currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} usuarios"},{header:d(()=>[t("div",ce,[s(c,{modelValue:w.value.global.value,"onUpdate:modelValue":l[1]||(l[1]=o=>w.value.global.value=o),placeholder:"Buscar..."},null,8,["modelValue"])]),t("div",pe,[s(X,{modelValue:N.value,options:M.value,optionLabel:"header","onUpdate:modelValue":F,display:"chip",placeholder:"Select Columns"},null,8,["modelValue","options"])])]),default:d(()=>[s(S,{selectionMode:"multiple",style:{width:"3rem"},exportable:!1,headerCheckboxSelection:D.value,onClick:ue(a.selectAllRows,["stop"])},null,8,["headerCheckboxSelection","onClick"]),(i(!0),u(ne,null,re(N.value,(o,P)=>(i(),de(S,{field:o.field,header:o.header,key:o.field+"_"+P},null,8,["field","header"]))),128)),s(S,{exportable:!1,style:{"min-width":"9rem"}},{body:d(o=>[s(r,{icon:"pi pi-pencil",outlined:"",rounded:"",style:{"background-color":"#22C55E",color:"#f7f7f7"},shape:"circle",onClick:P=>a.editObject(o.data),class:"mr-1"},null,8,["onClick"]),s(r,{icon:"pi pi-trash",outlined:"",rounded:"",style:{"background-color":"#EF4444",color:"#f7f7f7"},shape:"circle",onClick:P=>a.ConfirmDeleteDialog(o.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"])]),s(T,{visible:V.value,"onUpdate:visible":l[13]||(l[13]=o=>V.value=o),style:{width:"450px"},header:"Detalles de usuario",modal:!0,class:"p-fluid"},{footer:d(()=>[s(r,{label:"Cancelar",icon:"pi pi-times",text:"",onClick:A}),s(r,{label:"Guardar",icon:"pi pi-check",text:"",onClick:O})]),default:d(()=>[t("div",fe,[ye,s(q,{id:"type",modelValue:e.value.type,"onUpdate:modelValue":l[3]||(l[3]=o=>e.value.type=o),options:x.value,optionLabel:"label",placeholder:"Seleccione un tipo",required:"true"},{default:d(()=>[t("template",null,[a.slotProps.value&&a.slotProps.value.value?(i(),u("div",_e,[s(_,{value:a.slotProps.value.value,severity:C(a.slotProps.value.label)},null,8,["value","severity"])])):a.slotProps.value&&!a.slotProps.value.value?(i(),u("div",be,[s(_,{value:a.slotProps.value,severity:C(a.slotProps.value)},null,8,["value","severity"])])):(i(),u("span",he,b(a.slotProps.placeholder),1))])]),_:1},8,["modelValue","options"])]),t("div",ke,[Ce,s(c,{id:"company_name",modelValue:e.value.company_name,"onUpdate:modelValue":l[4]||(l[4]=o=>e.value.company_name=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:p({"p-invalid":n.value&&!e.value.company_name})},null,8,["modelValue","class"]),n.value&&!e.value.company_name?(i(),u("small",Ve,"Campo requerido.")):m("",!0)]),t("div",ge,[Pe,s(c,{id:"name",modelValue:e.value.name,"onUpdate:modelValue":l[5]||(l[5]=o=>e.value.name=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:p({"p-invalid":n.value&&!e.value.name})},null,8,["modelValue","class"]),n.value&&!e.value.name?(i(),u("small",Ue,"Campo requerido.")):m("",!0)]),t("div",qe,[Te,s(c,{id:"last_name",modelValue:e.value.last_name,"onUpdate:modelValue":l[6]||(l[6]=o=>e.value.last_name=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:p({"p-invalid":n.value&&!e.value.last_name})},null,8,["modelValue","class"]),n.value&&!e.value.last_name?(i(),u("small",De,"Campo requerido.")):m("",!0)]),t("div",we,[Me,s(c,{id:"document",modelValue:e.value.document,"onUpdate:modelValue":l[7]||(l[7]=o=>e.value.document=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:p({"p-invalid":n.value&&!e.value.document})},null,8,["modelValue","class"]),n.value&&!e.value.document?(i(),u("small",Ne,"Campo requerido.")):m("",!0)]),t("div",Se,[Ee,s(c,{id:"nit",modelValue:e.value.nit,"onUpdate:modelValue":l[8]||(l[8]=o=>e.value.nit=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:p({"p-invalid":n.value&&!e.value.name})},null,8,["modelValue","class"]),n.value&&!e.value.nit?(i(),u("small",Ie,"Campo requerido.")):m("",!0)]),t("div",xe,[Le,s(c,{id:"email",modelValue:e.value.email,"onUpdate:modelValue":l[9]||(l[9]=o=>e.value.email=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:p({"p-invalid":n.value&&!e.value.email})},null,8,["modelValue","class"]),n.value&&!e.value.email?(i(),u("small",Ae,"Campo requerido.")):m("",!0)]),t("div",Re,[je,s(q,{id:"status",modelValue:e.value.status,"onUpdate:modelValue":l[10]||(l[10]=o=>e.value.status=o),options:L.value,optionLabel:"label",placeholder:"Seleccione un estado",required:"true"},{default:d(()=>[t("template",null,[a.slotProps.value&&a.slotProps.value.value?(i(),u("div",Be,[s(_,{value:a.slotProps.value.value,severity:R(a.slotProps.value.label)},null,8,["value","severity"])])):a.slotProps.value&&!a.slotProps.value.value?(i(),u("div",ze,[s(_,{value:a.slotProps.value,severity:R(a.slotProps.value)},null,8,["value","severity"])])):(i(),u("span",Fe,b(a.slotProps.placeholder),1))])]),_:1},8,["modelValue","options"])]),t("div",$e,[s(r,{label:"Email de respaldo",icon:"pi pi-inbox",severity:"primary",class:"mx-1",onClick:j}),s(r,{label:"Teléfono",icon:"pi pi-phone",severity:"primary",class:"mx-1",onClick:l[11]||(l[11]=()=>{})}),s(r,{label:"Ubicación",icon:"pi pi-map-marker",severity:"primary",class:"mx-1",onClick:l[12]||(l[12]=()=>{})})])]),_:1},8,["visible"]),s(T,{visible:I.value,"onUpdate:visible":l[24]||(l[24]=o=>I.value=o),style:{width:"450px"},modal:!0,class:"p-fluid"},{footer:d(()=>[s(r,{label:"Cancelar",icon:"pi pi-times",text:"",onClick:A}),s(r,{label:"Guardar",icon:"pi pi-check",text:"",onClick:a.saveCarrier},null,8,["onClick"])]),default:d(()=>[t("div",Oe,[Je,s(q,{id:"type",modelValue:e.value.type,"onUpdate:modelValue":l[14]||(l[14]=o=>e.value.type=o),options:x.value,optionLabel:"label",placeholder:"Seleccione un tipo",required:"true"},{default:d(()=>[t("template",null,[a.slotProps.value&&a.slotProps.value.value?(i(),u("div",Ge,[s(_,{value:a.slotProps.value.value,severity:C(a.slotProps.value.label)},null,8,["value","severity"])])):a.slotProps.value&&!a.slotProps.value.value?(i(),u("div",Ye,[s(_,{value:a.slotProps.value,severity:C(a.slotProps.value)},null,8,["value","severity"])])):(i(),u("span",Ke,b(a.slotProps.placeholder),1))])]),_:1},8,["modelValue","options"]),n.value&&!e.value.type?(i(),u("small",He,"Campo requerido.")):m("",!0)]),t("div",Qe,[We,s(c,{id:"company_name",modelValue:e.value.company_name,"onUpdate:modelValue":l[15]||(l[15]=o=>e.value.company_name=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:p({"p-invalid":n.value&&!e.value.company_name})},null,8,["modelValue","class"]),n.value&&!e.value.company_name?(i(),u("small",Xe,"Campo requerido.")):m("",!0)]),t("div",Ze,[el,s(c,{id:"name",modelValue:e.value.name,"onUpdate:modelValue":l[16]||(l[16]=o=>e.value.name=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:p({"p-invalid":n.value&&!e.value.name})},null,8,["modelValue","class"]),n.value&&!e.value.name?(i(),u("small",ll,"Campo requerido.")):m("",!0)]),t("div",al,[ol,s(c,{id:"last_name",modelValue:e.value.last_name,"onUpdate:modelValue":l[17]||(l[17]=o=>e.value.last_name=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:p({"p-invalid":n.value&&!e.value.last_name})},null,8,["modelValue","class"]),n.value&&!e.value.last_name?(i(),u("small",sl,"Campo requerido.")):m("",!0)]),t("div",tl,[il,s(c,{id:"document",modelValue:e.value.document,"onUpdate:modelValue":l[18]||(l[18]=o=>e.value.document=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:p({"p-invalid":n.value&&!e.value.document})},null,8,["modelValue","class"]),n.value&&!e.value.document?(i(),u("small",ul,"Campo requerido.")):m("",!0)]),t("div",nl,[rl,s(c,{id:"nit",modelValue:e.value.nit,"onUpdate:modelValue":l[19]||(l[19]=o=>e.value.nit=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:p({"p-invalid":n.value&&!e.value.nit})},null,8,["modelValue","class"]),n.value&&!e.value.nit?(i(),u("small",dl,"Campo requerido.")):m("",!0)]),t("div",vl,[ml,s(c,{id:"email",modelValue:e.value.email,"onUpdate:modelValue":l[20]||(l[20]=o=>e.value.email=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:p({"p-invalid":n.value&&!e.value.email})},null,8,["modelValue","class"]),n.value&&!e.value.email?(i(),u("small",cl,"Campo requerido.")):m("",!0)]),t("div",pl,[fl,s(q,{id:"status",modelValue:e.value.status,"onUpdate:modelValue":l[21]||(l[21]=o=>e.value.status=o),options:L.value,optionLabel:"label",placeholder:"Seleccione un estado",required:"true"},{default:d(()=>[t("template",null,[a.slotProps.value&&a.slotProps.value.value?(i(),u("div",yl,[s(_,{value:a.slotProps.value.value,severity:C(a.slotProps.value.label)},null,8,["value","severity"])])):a.slotProps.value&&!a.slotProps.value.value?(i(),u("div",_l,[s(_,{value:a.slotProps.value,severity:C(a.slotProps.value)},null,8,["value","severity"])])):(i(),u("span",bl,b(a.slotProps.placeholder),1))])]),_:1},8,["modelValue","options"])]),t("div",hl,[s(r,{label:"Email de respaldo",icon:"pi pi-inbox",severity:"primary",class:"mx-1",onClick:j}),s(r,{label:"Teléfono",icon:"pi pi-phone",severity:"primary",class:"mx-1",onClick:l[22]||(l[22]=()=>{})}),s(r,{label:"Ubicación",icon:"pi pi-map-marker",severity:"primary",class:"mx-1",onClick:l[23]||(l[23]=()=>{})})])]),_:1},8,["visible"]),s(T,{visible:g.value,"onUpdate:visible":l[26]||(l[26]=o=>g.value=o),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[s(r,{label:"No",icon:"pi pi-times",text:"",onClick:l[25]||(l[25]=o=>g.value=!1)}),s(r,{label:"Yes",icon:"pi pi-check",text:"",onClick:Y})]),default:d(()=>[t("div",kl,[Cl,a.product?(i(),u("span",Vl,[B("¿Está seguro que desea eliminar a "),t("b",null,b(e.value.name),1),B("?")])):m("",!0)])]),_:1},8,["visible"]),s(T,{visible:U.value,"onUpdate:visible":l[28]||(l[28]=o=>U.value=o),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[s(r,{label:"No",icon:"pi pi-times",text:"",onClick:l[27]||(l[27]=o=>U.value=!1)}),s(r,{label:"Yes",icon:"pi pi-check",text:"",onClick:Q})]),default:d(()=>[t("div",gl,[Pl,a.product?(i(),u("span",Ul,"Esta seguro que desea eliminar a los usuarios seleccionados?")):m("",!0)])]),_:1},8,["visible"]),s(ee,{group:"headless"},{container:d(({message:o,acceptCallback:P,rejectCallback:ae})=>[t("div",ql,[Tl,t("span",Dl,b(o.header),1),t("p",wl,b(o.message),1),t("div",Ml,[s(r,{label:"Eliminar",onClick:P},null,8,["onClick"]),s(r,{label:"Cancelar",outlined:"",onClick:ae},null,8,["onClick"])])])]),_:1}),t("div",Nl,[s(r,{onClick:l[29]||(l[29]=o=>G()),label:"Eliminar"})]),s(le)])}}};export{Il as default};
